# Base Configuration for Backtesting Framework

data:
  file_path: "../market data pipeline/processed market data/market_data_time_series.csv"
  date_column: "Date"
  use_multi_index: true  # Enable multi-index CSV loading
  multi_index_header_rows: 2
  date_header_row: 2
  
  # Asset class filtering
  asset_classes_include:
    - "cad_credit_spreads"
    - "cad_credit_exposure"
    - "equity_indices"
    - "volatility"
    - "yield_curves"
    - "economic_indicators"
    - "forecasts"
  asset_classes_exclude: null  # null = exclude none
  
  # Column filtering (optional)
  columns_include:
    cad_credit_spreads: ["cad_oas"]
    cad_credit_exposure: ["cad_ig_er_index"]
    equity_indices: ["tsx", "s&p_500"]
    volatility: ["vix"]
    yield_curves: ["us_3m_10y"]
    economic_indicators: ["us_growth_surprises", "us_inflation_surprises", "us_lei_yoy", "us_hard_data_surprises", "us_equity_revisions", "us_economic_regime"]
    forecasts: ["spx_1bf_eps", "spx_1bf_sales", "tsx_1bf_eps", "tsx_1bf_sales"]
  columns_exclude: null  # null = exclude none
  
  # Date range
  resample_frequency: null  # Use raw daily data, or specify frequency like "W-FRI"
  start_date: null  # "2002-11-01"
  end_date: null
  
  # Missing data handling
  missing_data_strategy: "forward_fill"  # forward_fill, backward_fill, interpolate, drop, fill_value
  missing_data_fill_value: 0.0
  
  # Outlier detection
  outlier_detection_enabled: false
  outlier_method: "iqr"  # iqr, zscore
  outlier_threshold: 3.0
  outlier_action: "flag"  # flag, remove, clip
  
  # Gap detection
  gap_detection_enabled: false
  max_gap_days: 7
  gap_action: "flag"  # flag, fill, drop
  
  # Data validation
  data_validation_enabled: true
  min_value: null
  max_value: null
  
  # Column transformations
  column_rename_map: null  # {"old_name": "new_name"}
  force_numeric: true
  
  # Multi-index flattening
  flatten_columns: true  # Always use 2nd level (column names)
  
  # Existing fields (keep)
  benchmark_asset: "cad_ig_er_index"
  trading_asset: "cad_ig_er_index"
  assets: []  # Will be populated after flattening, or specify explicitly
  required_columns: []

portfolio:
  initial_capital: 100
  frequency: "D" # Daily frequency for calculations
  fees: 0.0
  slippage: 0.0
  position_size: 1.0
  leverage: 1.0

reporting:
  output_dir: "outputs/reports"
  generate_html: true
  generate_pdf: false
  include_plots: true
  metrics_precision: 4

# Feature engineering configuration (parameters are now in trading days)
features:
  momentum_periods: [5, 10, 15, 20, 30, 40, 60, 65, 130, 260] # Scaled from weeks
  volatility_windows: [20, 40, 65, 130] # Scaled from weeks
  sma_windows: [20, 40, 65, 130] # Scaled from weeks
  
  include_macd: true
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  
  include_stochastic: true
  stochastic_k_period: 14
  
  include_rsi: false
  include_bollinger: false
  
  include_oas_features: true
  oas_momentum_period: 20 # Scaled from 4 weeks
  include_vix: true
  
  include_correlations: false
  include_relative_strength: false
  
  primary_asset: "cad_ig_er_index"
  fill_na_value: 0.0

# Parameters are now in trading days
cross_asset_momentum:
  momentum_assets: ["cad_ig_er_index", "tsx"]  # Updated to use only available assets
  momentum_lookback_days: 10 # Scaled from 2 weeks
  min_confirmations: 2  # Updated to match number of assets

# Parameters are now in trading days
multi_asset_momentum:
  momentum_assets_map:
    tsx: "tsx"
    cad_ig: "cad_ig_er_index"
  momentum_lookback_days: 20 # Scaled from 4 weeks
  signal_threshold: -0.005
  exit_hold_days: 5 # Scaled from 1 week

# Genetic Algorithm specific (no changes needed here)
genetic_algorithm:
  population_size: 120
  max_generations: 120
  mutation_rate: 0.40
  crossover_rate: 0.40
  target_return_early_stop: 0.70
  max_clauses_per_rule: 4
  elite_size: 25
  fitness_drawdown_penalty_factor: 0.1
  initial_cash_ga: 10000
  
# Vol-Adaptive Momentum specific
vol_adaptive_momentum:
  price_column: "cad_ig_er_index"
  vix_column: "vix"
  mom_lookback: 20
  vol_lookback: 20
  vix_z_lookback: 252
  thr_low_vol: 0.60
  thr_high_vol: 0.00
  max_hold: 10
  scale: 0.005

# Strategy selection control
strategies:
  enabled:
    - "cross_asset_momentum"
    - "multi_asset_momentum" 
    - "genetic_algorithm"
    - "vol_adaptive_momentum"
  # Available options: cross_asset_momentum, multi_asset_momentum, genetic_algorithm, vol_adaptive_momentum
  run_all_by_default: true

# Enhanced reporting configuration
enhanced_reporting:
  generate_detailed_stats_file: true
  stats_file_name: "comprehensive_strategy_comparison.txt"
  include_vectorbt_stats: true
  include_quantstats_metrics: true
  include_manual_calculations: true
  include_drawdown_analysis: true

# Common settings
random_seed: 7
verbose: true
log_level: "INFO" 